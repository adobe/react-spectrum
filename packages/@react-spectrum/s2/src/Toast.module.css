/* Safari doesn't support :active-view-transition-type() yet, so we fall back to a class on the html element */
html.toast-add,
html.toast-remove,
html.toast-expand,
html.toast-collapse,
html.toast-clear,
html:active-view-transition-type(toast-add, toast-remove, toast-expand, toast-collapse, toast-clear) {
  view-transition-name: none;

  .toast-controls {
    view-transition-name: toast-controls;
  }

  .toast-background {
    view-transition-name: toast-background;
  }

  &::view-transition-group(toast-background) {
    z-index: -1;
    animation-duration: 400ms;
  }
}

::view-transition-group(.toast),
::view-transition-group(toast-content),
::view-transition-group(toast-action),
::view-transition-group(toast-close),
::view-transition-group(toast-controls) {
  animation-duration: 400ms;
}

::view-transition-group(.toast.bottom) {
  --slideX: 0;
  --slideY: calc(100% + 12px);
}

::view-transition-group(.toast.top) {
  --slideX: 0;
  --slideY: calc(-100% - 12px);
}

::view-transition-group(.toast.start) {
  --slideX: calc(-100% - 12px);
  --slideY: 0;
}

::view-transition-group(.toast.end) {
  --slideX: calc(100% + 12px);
  --slideY: 0;
}

html.toast-add,
html.toast-remove,
html:active-view-transition-type(toast-add, toast-remove) {
  &::view-transition-new(.toast.last):only-child {
    animation-name: slide-in;
  }

  &::view-transition-old(.toast.last):only-child {
    animation-name: slide-out;
  }
}

html.toast-expand,
html:active-view-transition-type(toast-expand) {
  &::view-transition-group(toast-expand) {
    animation-duration: 300ms;
  }
}

html.toast-collapse,
html:active-view-transition-type(toast-collapse) {
  &::view-transition-group(toast-expand) {
    animation-duration: 600ms;
  }
}

html.toast-expand,
html.toast-collapse,
html:active-view-transition-type(toast-expand, toast-collapse) {
  .toast-content {
    view-transition-name: toast-content;
  }

  .toast-expand {
    view-transition-name: toast-expand;
  }

  .toast-action {
    view-transition-name: toast-action;
  }

  .toast-close {
    view-transition-name: toast-close;
  }

  /* Force toast controls to be visible during the animation */
  .toast-controls {
    display: flex;
  }

  &::view-transition-old(.toast.last),
  &::view-transition-new(.toast.last) {
    height: 100%;
    width: 100%;
  }
}

html.toast-clear,
html:active-view-transition-type(toast-clear) {
  &::view-transition-group(.toast) {
    animation-name: fade-out;
  }
}

@keyframes slide-in {
  from {
    translate: var(--slideX) var(--slideY);
    opacity: 0;
  }
}

@keyframes slide-out {
  to {
    translate: var(--slideX) var(--slideY);
    opacity: 0;
  }
}

@keyframes fade-out {
  to {
    opacity: 0
  }
}
