import Button from '@react/react-spectrum/Button';
import Provider from '@react/react-spectrum/Provider';

# Getting Started

react-spectrum is usable with a module bundler like [Parcel](https://parceljs.org) or [Webpack](https://webpack.js.org).
Components are then `require`able as in the following example. The styles for each component you import will be bundled
along-side the JavaScript (more on configuring this below). Each component should be imported independently -
this way only the components you use will be included in the output JavaScript and CSS files.

## Installation

Add the following to your `~/.npmrc`:

```
@react:registry=https://artifactory.corp.adobe.com:443/artifactory/api/npm/npm-react-release/
//artifactory.corp.adobe.com:443/artifactory/api/npm/npm-react-release/:always-auth=false
```

Then you should be able to install with npm:

```
npm install @react/react-spectrum --save
```

## Example

```jsx
// Import root provider at the top level, it brings global page styles (CSS reset, fonts, icons, etc.)
import Provider from '@react/react-spectrum/Provider';

// Import the component you want to use
import Button from '@react/react-spectrum/Button';

// Render it!
let app = (
  <Provider theme="dark">
    <Button>Hello World</Button>
  </Provider>
);

ReactDOM.render(app, dom);
```

And the output looks something like this:

<Button>Hello World</Button>

## Webpack

To use react-spectrum, you'll need [css-loader](https://github.com/webpack-contrib/css-loader) and either
[style-loader](https://github.com/webpack-contrib/style-loader) to inject the styles
directly into the DOM, or [extract-text-webpack-plugin](https://github.com/webpack-contrib/extract-text-webpack-plugin)
to extract the CSS to a single separate file.

```javascript
module.exports = {
  module: {
    rules: [
      {
        test: /\.css/,
        loaders: ['style-loader', 'css-loader']
      }
    ]
  }
}
```

## Parcel

No additional configuration is needed to use react-spectrum with Parcel. ðŸ˜‡

## Specify themes which you want to include

You can specify the themes which you want to be included/excluded in build by passing enviroment variables to your application's build process, for example: `THEME_LIGHT=true THEME_DARK=true make build`. If you don't pass anything, all themes are imported.

You can specify what theme to use at runtime using the `Provider` component which wraps your app.

```jsx
<Provider theme="dark">
  {/* YOUR APP HERE */}
</Provider>
```

#### With Webpack
In webpack, you can use `DefinePlugin` to specify environment variables. Unfortunately, you must explicitly set all of the environment variables, including the ones for themes/scales you are not using.

```javascript
module.exports = {
  plugins: [
    new webpack.DefinePlugin({
      'process.env.SCALE_MEDIUM': 'true',
      'process.env.SCALE_LARGE': 'false',
      'process.env.THEME_LIGHT': 'true',
      'process.env.THEME_LIGHTEST': 'false',
      'process.env.THEME_DARK': 'false',
      'process.env.THEME_DARKEST': 'false'
    })
  ]
}
```

#### With Create React App
If you use Create React App, you can add the plugin above to your webpack config without ejecting
by using the library [`react-app-rewired`](https://github.com/timarney/react-app-rewired).

1. `npm i -S react-app-rewired react-app-rewire-define-plugin`
2. In the `start`, `build`, and `test` scripts inside `package.json`, replace `react-scripts` with `react-app-rewired`
3. Add the `config-overrides.js` file below to the root level of your application

`package.json` modifications
```json
{
  "dependencies": {
    "react-app-rewire-define-plugin": "^1.0.0",
    "react-app-rewired": "^1.5.2"
  },
  "scripts": {
    "start": "react-app-rewired start",
    "build": "react-app-rewired build",
    "test": "react-app-rewired test --env=jsdom",
  }
}
```

`config-overrides.js`
```javascript
const rewireDefinePlugin = require('react-app-rewire-define-plugin');

module.exports = function override(config, env) {
  config = rewireDefinePlugin(config, env, {
    'process.env.SCALE_MEDIUM': 'true',
    'process.env.SCALE_LARGE': 'false',
    'process.env.THEME_LIGHT': 'true',
    'process.env.THEME_LIGHTEST': 'false',
    'process.env.THEME_DARK': 'false',
    'process.env.THEME_DARKEST': 'false',
  });

  return config;
};
```

Read more about this workaround [here](https://git.corp.adobe.com/gist/kario/01883cfa1860f4ec7898c6ee8cd20d49).

## Scale support for mobile

For mobile, Spectrum has a larger scale that enables larger tap targets on all controls. By default, this scale is not built into react-spectrum's CSS. However, you can enable it using some additional environment variables, similar to the ones for themes described above. There are three cases:

* To get only the default (medium) scale, you do not need to specify any environment variables.
* To get only the large scale for mobile, specify `SCALE_LARGE=true` when building.
* To get both medium and large scale, specify `SCALE_MEDIUM=true SCALE_LARGE=true` when building.

Once you have built in the required themes into your CSS, you can switch between scales using the `Provider` component.

```jsx
<Provider theme="dark" scale="large">
  {/* YOUR APP HERE */}
</Provider>
```
